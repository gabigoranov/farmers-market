@using Market.Data.Models
@using Market.Services
@model AddUserViewModel
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer

@{
    ViewData["Title"] = "Register";

}

<form class="form" asp-action="Register" method="post" enctype="multipart/form-data">
    <div class="profile-picture-select-container">
        <div class="form-container">
            <label class="custom-file-upload" for="image-input">@Localizer["SelectImage"]</label>
            <input id="image-input" asp-for="File" type="file" name="file" required />
        </div>
        <img class="profile-picture" id="profile-picture" src="~/Images/image-display-alt.png" />
    </div>
    <div class="form-container">
        <input asp-for="User.FirstName" placeholder="@Localizer["FirstName"]" aria-required="true" />
        <span asp-validation-for="User.FirstName" class="text-danger"></span>
    </div>
    <div class="form-container">
        <input asp-for="User.LastName" placeholder="@Localizer["LastName"]" aria-required="true" />
        <span asp-validation-for="User.LastName" class="text-danger"></span>
    </div>
    <div class="form-container">
        <input asp-for="User.Town" placeholder="@Localizer["Town"]" aria-required="true" />
        <span asp-validation-for="User.Town" class="text-danger"></span>
    </div>
    <div class="form-container">
        <input asp-for="User.Email" placeholder="@Localizer["Email"]" aria-required="true" />
        <span asp-validation-for="User.Email" class="text-danger"></span>
    </div>
    <div class="form-container">
        <input asp-for="User.PhoneNumber" placeholder="@Localizer["PhoneNumber"]" aria-required="true" />
        <span asp-validation-for="User.PhoneNumber" class="text-danger"></span>
    </div>
    <div class="form-container">
        <input asp-for="User.BirthDate" placeholder="@Localizer["BirthDate"]" aria-required="true" />
        <span asp-validation-for="User.BirthDate" class="text-danger"></span>
    </div>
    <div class="form-container">
        <input asp-for="User.Description" placeholder="@Localizer["Description"]" aria-required="true" />
        <span asp-validation-for="User.Description" class="text-danger"></span>
    </div>
    <div class="form-container">
        <input asp-for="User.Password" placeholder="@Localizer["Password"]" aria-required="true" />
        <span asp-validation-for="User.Password" class="text-danger"></span>
    </div>
    <button class="custom-file-upload" type="submit">@Localizer["Submit"]</button>
    <a asp-action="RegisterOrganization" asp-controller="User">@Localizer["OrganizationText"]</a>
</form>

<script>
    function displayImage() {
        var file = document.getElementById('image-input').files[0];
        var reader = new FileReader();
        reader.onload = function (e) {
            var image = document.createElement("img");
            document.getElementById("profile-picture").src = e.target.result;
        }
        reader.readAsDataURL(file);
    }

    document.getElementById("image-input").onchange = () => {
        displayImage();
    };
</script>